function t(t){return t&&t.__esModule?t.default:t}var i=globalThis,e={},s={},h=i.parcelRequire1144;null==h&&((h=function(t){if(t in e)return e[t].exports;if(t in s){var i=s[t];delete s[t];var h={id:t,exports:{}};return e[t]=h,i.call(h.exports,h,h.exports),h.exports}var o=Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}).register=function(t,i){s[t]=i},i.parcelRequire1144=h),(0,h.register)("27Lyk",function(t,i){Object.defineProperty(t.exports,"register",{get:()=>e,set:t=>e=t,enumerable:!0,configurable:!0});var e,s=new Map;e=function(t,i){for(var e=0;e<i.length-1;e+=2)s.set(i[e],{baseUrl:t,path:i[e+1]})}}),h("27Lyk").register(new URL("",import.meta.url).toString(),JSON.parse('["ioUUD","index.53ea7bc5.js","eUXST","platform.11c76040.png","lcwG1","idle_1.ef0200ed.png","a93x8","idle_2.4194aeac.png","8D5Z7","idle_3.3dc0e879.png","bsldS","run_1.6472e175.png","dd9o1","run_2.c4968a6b.png","n3GMK","run_3.efff6a40.png","6WPgJ","run_4.d377bdf3.png","8axzb","angler1.8efa57e4.png","c4s31","Idle (1).cd81fc4c.png","hIZuy","idle.c183103c.png","h2MAb","idle1.eaa0a694.png","4Zepu","smokeExplosion.f72e891c.png","7jPbZ","fireExplosion.5dc59534.png"]'));var o={};o=new URL("platform.11c76040.png",import.meta.url).toString();const a=innerWidth,r=innerHeight;function n(t){let i=new Image;return i.src=t,i}function l(t,i){return t.position.x<i.position.x+i.width&&t.position.x+t.width>i.position.x&&t.position.y<i.position.y+i.height&&t.position.y+t.height>i.position.y}function p(t){return t.position.x+t.width>0&&t.position.x<window.innerWidth&&t.position.y+t.height>0&&t.position.y<window.innerHeight}const d=[{x:-1,y:r-100},{x:300,y:r-100},{x:600,y:r-100},{x:400,y:r-320},{x:900,y:r-100},{x:1500,y:r-100},{x:1800,y:r-100},{x:2100,y:r-100},{x:2400,y:r-100},{x:2700,y:r-100},{x:3e3,y:r-100},{x:3300,y:r-100},{x:3900,y:r-320},{x:4200,y:r-520},{x:4500,y:r-520},{x:4800,y:r-520},{x:5100,y:r-520},{x:5400,y:r-520},{x:5700,y:r-520},{x:6e3,y:r-520},{x:6300,y:r-200},{x:6700,y:r-320},{x:7e3,y:r-100},{x:7300,y:r-100},{x:7600,y:r-100},{x:7900,y:r-100},{x:8200,y:r-100},{x:8500,y:r-100},{x:8800,y:r-320},{x:9100,y:r-100},{x:9400,y:r-100},{x:9700,y:r-100},{x:1e4,y:r-100},{x:10300,y:r-100},{x:10600,y:r-100},{x:10600,y:r-320},{x:10600,y:r-530},{x:10600,y:r-740},{x:11200,y:r-320},{x:11200,y:r-530},{x:11200,y:r-740},{x:10900,y:r-100},{x:11200,y:r-100},{x:11500,y:r-100},{x:11800,y:r-100},{x:12100,y:r-100},{x:12600,y:r-330},{x:12900,y:r-330},{x:13200,y:r-330},{x:13500,y:r-330},{x:13800,y:r-330},{x:14100,y:r-330},{x:14400,y:r-330},{x:14700,y:r-330},{x:15e3,y:r-330},{x:15300,y:r-330},{x:15600,y:r-100},{x:16100,y:r-100},{x:16400,y:r-100},{x:16800,y:r-100},{x:17100,y:r-100},{x:17500,y:r-100},{x:17900,y:r-100},{x:18e3,y:r-100},{x:18300,y:r-100},{x:18700,y:r-320},{x:19e3,y:r-320},{x:19300,y:r-320},{x:19600,y:r-320},{x:19900,y:r-320},{x:20200,y:r-320},{x:20600,y:r-320},{x:20900,y:r-320}],y=[{x:1e3,y:r-100-130},{x:2100,y:r-100-130},{x:2720,y:r-100-130},{x:4900,y:r-520-130},{x:5e3,y:r-520-130},{x:5600,y:r-520-130},{x:7e3,y:r-320-130},{x:8e3,y:r-100-130},{x:8800,y:r-100-130},{x:9800,y:r-100-130},{x:10800,y:r-320-130},{x:10800,y:r-520-130},{x:10800,y:r-720-130},{x:10900,y:r-100-130},{x:11200,y:r-100-130},{x:12100,y:r-100-130},{x:16100,y:r-100-130},{x:16400,y:r-100-130},{x:17100,y:r-100-130},{x:18e3,y:r-100-130},{x:19e3,y:r-320-130},{x:19300,y:r-320-130}],c=[{x:4400,y:r-520-140},{x:4700,y:r-520-140},{x:7500,y:r-100-140},{x:9100,y:r-320-140},{x:9400,y:r-100-140},{x:11500,y:r-100-140},{x:12600,y:r-330-140},{x:13200,y:r-330-140},{x:15e3,y:r-330-140},{x:15300,y:r-330-140},{x:12600,y:r-330-140},{x:12900,y:r-330-140},{x:13200,y:r-330-140}];var x=class{images=[];constructor(t,i,e,s){for(let i=0;i<t.length;i++){let e=n(t[i]);this.images.push(e)}this.timerCount=i,this.timerCountDefault=this.timerCount,this.imageIndex=0,this.state=e,this.stopAtEnd=s}isFor(t){return this.state===t}reset(){this.imageIndex=0}getImage(){return this.setImageIndex(),this.images[this.imageIndex]}setImageIndex(){this.timerCount--,this.timerCount<=0&&!this.shouldStop()&&(this.timerCount=this.timerCountDefault,this.imageIndex++,this.imageIndex>=this.images.length&&(this.imageIndex=0))}shouldStop(){return this.stopAtEnd&&this.imageIndex===this.images.length-1}},m=class{constructor({x:t,y:i,direction:e=1,verticalDirection:s=!1,damage:h=5,color:o,speed:a=10}){this.position={x:t,y:i},this.speed=a,this.active=!0,this.damage=h,this.color=o,this.width=20,this.height=20,this.direction=e,this.verticalDirection=s}update(t){this.draw(t),this.verticalDirection?this.position.y-=this.speed:this.position.x+=this.speed*this.direction,(this.position.x>a||this.position.y>r||this.position.y<0||this.position.x<0)&&(this.active=!1)}draw(t){t.beginPath(),t.arc(this.position.x+this.width,this.position.y,8,0,2*Math.PI),t.fillStyle=this.color,t.fill()}},u={};u=new URL("idle_1.ef0200ed.png",import.meta.url).toString();var g={};g=new URL("idle_2.4194aeac.png",import.meta.url).toString();var f={};f=new URL("idle_3.3dc0e879.png",import.meta.url).toString();var w={};w=new URL("run_1.6472e175.png",import.meta.url).toString();var v={};v=new URL("run_2.c4968a6b.png",import.meta.url).toString();var S={};S=new URL("run_3.efff6a40.png",import.meta.url).toString();var b={};b=new URL("run_4.d377bdf3.png",import.meta.url).toString();const _={idle:"idle"},H={idle:"idle",run:"run"};var E=class{constructor(){this.position={x:100,y:100},this.velocity={x:0,y:0},this.width=100,this.height=100,this.speed=10,this.frames=0,this.bullets=[],this.cooldown=500,this.lastShotTime=0,this.state=H.idle,this.direction=1,this.verticalDirection=!1,this.isJumping=!1,this.health=400,this.createAnimations()}draw(t){let i=this.animations.find(t=>t.isFor(this.state)).getImage();t.save(),-1===this.direction&&t.scale(-1,1),t.drawImage(i,-1===this.direction?-this.position.x-this.width:this.position.x,this.position.y,this.width,this.height),t.restore()}update(t,i){this.frames++,this.draw(t),this.position.x+=this.velocity.x,this.position.y+=this.velocity.y,this.position.y+this.height+this.velocity.y<=r&&(this.velocity.y+=1.5),this.bullets.forEach(i=>i.update(t)),this.bullets=this.bullets.filter(t=>t.active),i-this.lastShotTime>=this.cooldown?this.canShoot=!0:this.canShoot=!1}shootTop(t){if(this.canShoot){let i,e;i=-1===this.direction?this.position.x:this.position.x+this.width,this.verticalDirection?(i=this.position.x+this.width/4,e=this.position.y):e=this.position.y+this.height/2,this.bullets.push(new m({x:i,y:e,direction:this.direction,verticalDirection:this.verticalDirection,damage:100,color:"pink",speed:20})),this.lastShotTime=t,this.canShoot=!1}}createAnimations=()=>{this.idleAnimation=new x([t(u),t(g),t(f),t(f)],8,H.idle),this.runAnimation=new x([t(w),t(v),t(S),t(b)],8,H.run),this.animations=[this.idleAnimation,this.runAnimation]}},R=class{constructor({x:t,y:i,image:e}){this.position={x:t,y:i},this.image=e,this.width=400,this.height=100}draw(t){t.drawImage(this.image,this.position.x,this.position.y,this.width,this.height)}},A={};A=new URL("angler1.8efa57e4.png",import.meta.url).toString();var I={};I=new URL("Idle (1).cd81fc4c.png",import.meta.url).toString();var F={};F=new URL("idle.c183103c.png",import.meta.url).toString();var M={};M=new URL("idle1.eaa0a694.png",import.meta.url).toString();var T=class{constructor(){this.backgroundMusic=document.querySelector("#bg-music"),this.shootSound=document.querySelector("#shoot-music"),this.zombieSound=document.querySelector("#zombie-music"),this.enemyDeadSound=document.querySelector("#enemy-dead-music"),this.heliMusic=document.querySelector("#heli-music")}playBackgroundMusic(){this.backgroundMusic.play()}stopBackgroundMusic(){this.backgroundMusic.pause()}playShootSound(){this.shootSound.play()}playZombieSound(){this.zombieSound.play()}playHeliSound=()=>{this.heliMusic.play()}};class L{constructor({x:t,y:i}){this.position={x:t,y:i},this.active=!0,this.direction=-1,this.audio=new T}draw(t){if(!t)return}}class k extends L{constructor({x:i,y:e}){super({x:i,y:e}),this.health=100,this.speedX=-4.5*Math.random()-1.5,this.speed=10,this.frameX=0,this.frameY=0,this.maxFrame=37,this.image=n(t(A)),this.frame=Math.floor(3*Math.random())+0,this.width=228,this.height=169,this.score=15}draw(t){super.draw(t),t.drawImage(this.image,this.frameX*this.width,this.frameY*this.height,this.width,this.height,this.position.x,this.position.y,this.width,this.height)}update(t){this.draw(t),this.position.x+=this.speedX,this.position.x+this.width<0&&(this.active=!1),this.frameX<this.maxFrame?this.frameX++:this.frameX=0}}class O extends L{constructor({x:t,y:i}){super({x:t,y:i}),this.width=240,this.height=160,this.active=!0,this.speed=10,this.bullets=[],this.cooldown=2e3,this.lastShotTime=0,this.health=100,this.score=5}draw(i){i.drawImage(n(t(M)),this.position.x,this.position.y,this.width,this.height)}update(t,i){this.draw(t),this.handleShooting(i),this.bullets.forEach(i=>i.update(t)),this.bullets=this.bullets.filter(t=>t.active)}handleShooting(t){t-this.lastShotTime>this.cooldown&&p(this)?(this.state=_.attack,this.shoot(),this.audio.playShootSound(),this.lastShotTime=t):this.state=_.idle}shoot(){this.bullets.push(new m({x:this.position.x,y:this.position.y+this.height/2,direction:this.direction,damage:5,color:"red"}))}}class U extends L{constructor({x:t,y:i}){super({x:t,y:i}),this.width=140,this.height=140,this.active=!0,this.speed=10,this.health=100,this.score=5}draw(i){i.drawImage(n(t(I)),this.position.x,this.position.y,this.width,this.height)}update(t){this.draw(t),this.position.y+this.height<r&&(this.position.y+=3.5)}}class D extends L{constructor({x:t,y:i}){super({x:t,y:i}),this.width=100,this.height=140,this.active=!0,this.speed=10,this.bullets=[],this.cooldown=2e3,this.lastShotTime=0,this.health=120,this.score=10}draw(i){i.drawImage(n(t(F)),this.position.x,this.position.y,this.width,this.height)}update(t,i){this.draw(t),this.handleShooting(i),this.bullets.forEach(i=>i.update(t)),this.bullets=this.bullets.filter(t=>t.active)}handleShooting(t){t-this.lastShotTime>this.cooldown&&p(this)&&(this.audio.playShootSound(),this.shoot(),this.lastShotTime=t)}shoot(){this.bullets.push(new m({x:this.position.x+this.width,y:this.position.y+this.height/2,direction:this.direction,damage:5,color:"red"}))}}var P={};P=new URL("smokeExplosion.f72e891c.png",import.meta.url).toString();var X={};X=new URL("fireExplosion.5dc59534.png",import.meta.url).toString();class q{constructor({x:t,y:i}){this.position={x:t,y:i},this.frameX=0,this.fps=15,this.maxFrame=8,this.spriteHeight=200,this.timer=0,this.interval=1e3/this.fps,this.active=!0}update(t,i){this.draw(t),this.timer>this.interval?(this.frameX++,this.timer=0):this.timer+=i,this.frameX>this.maxFrame&&(this.active=!1)}draw=t=>{t.drawImage(this.image,this.frameX*this.spriteWidth,0,this.spriteWidth,this.spriteHeight,this.position.x,this.position.y,this.width,this.height)}}class C extends q{constructor({x:i,y:e}){super({x:i,y:e}),this.image=n(t(P)),this.spriteWidth=200,this.width=this.spriteWidth,this.height=this.spriteHeight,this.x=i-.5*this.width,this.y=e-.5*this.height}}class G extends q{constructor({x:i,y:e}){super({x:i,y:e}),this.image=n(t(X)),this.spriteWidth=200,this.width=this.spriteWidth,this.height=this.spriteHeight,this.x=i-.5*this.width,this.y=e-.5*this.height}}const W=document.querySelector("canvas"),Z=W.getContext("2d");W.width=a,W.height=r;let J={right:{pressed:!1},left:{pressed:!1}},K=0;var B=class{constructor(){this.player=new E,this.platforms=[],this.enemies=[],this.generatePlatforms(),this.generateTroops(),this.generateTowers(),this.setupEventListener(),this.scrollOffset=0,this.enemyInterval=1e3,this.gameOver=!1,this.score=0,this.maxMoved=0,this.gameTime=0,this.lives=3,this.explosions=[],this.enemySpawnIntervalId=null,this.texts={waveIncomingText:!1,startText:!0},setTimeout(()=>{this.texts.startText=!1},2e3),this.audio=new T,this.audio.playBackgroundMusic(),this.isPaused=!1}togglePause(){this.isPaused=!this.isPaused,this.isPaused?this.pauseGame():this.resumeGame()}pauseGame(){clearInterval(this.enemySpawnIntervalId),this.audio.stopBackgroundMusic()}resumeGame(){this.enemySpawnIntervalId=setInterval(()=>{let t=.4>Math.random();for(let i=0;i<10;i++)t?this.addZombie(i):this.addAngler1()},1e3*(this.scrollOffset>18500?5:10)),this.audio.playBackgroundMusic()}generatePlatforms=()=>{d.forEach(i=>{this.platforms.push(new R({x:i.x,y:i.y,image:n(t(o))}))})};generateTroops=()=>{y.forEach(t=>{this.enemies.push(new O({x:t.x,y:t.y}))})};addZombie=t=>{let i,e;this.scrollOffset>19e3?(i=this.player.position.x+40*t,e=this.player.position.y+40):(i=this.player.position.x+100*t,e=this.player.position.y+100*t),this.audio.playZombieSound(),this.enemies.push(new U({x:i,y:e}))};generateTowers=()=>{c.forEach(t=>{this.enemies.push(new D({x:t.x,y:t.y}))})};handlePlatformMovement=()=>{(!J.right.pressed||!(this.scrollOffset>=19500))&&(J.right.pressed&&this.player.position.x<400?this.player.velocity.x=this.player.speed:J.left.pressed&&this.player.position.x>100||J.left.pressed&&0===this.scrollOffset&&this.player.position.x>0?this.player.velocity.x=-this.player.speed:(this.player.velocity.x=0,J.right.pressed?(this.scrollOffset+=this.player.speed,this.scrollOffset>this.maxMoved&&(this.maxMoved=this.scrollOffset),this.maxMoved>=18500&&(this.texts.waveIncomingText=!0),this.platforms.forEach(t=>t.position.x-=this.player.speed),this.enemies.forEach(t=>t.position.x-=this.player.speed)):J.left.pressed&&this.scrollOffset>0&&(this.scrollOffset-=this.player.speed,this.platforms.forEach(t=>t.position.x+=.66*this.player.speed),this.enemies.forEach(t=>t.position.x+=.66*this.player.speed))))};draw=()=>{this.platforms.forEach(t=>{t.draw(Z)}),this.showGameStats(),Z.save(),this.texts.waveIncomingText&&this.displayMessage("Huge Wave Incoming!",a/3.5,r/2,5e3),this.texts.startText&&this.displayMessage("Go Player Go!",a/3,r/2,5e3),Z.restore()};showGameStats=()=>{Z.save(),Z.font="64px Metal Mania",Z.fillStyle="white",Z.shadowOffsetX=4,Z.shadowOffsetY=4,Z.shadowColor="black",Z.fillText(this.score.toString().padStart(4,"0"),a-140,70),Z.fillText(`Health: ${this.player.health}`,20,70),Z.fillText(`Lives: ${this.lives}`,20,140),Z.font="72px Metal Mania",Z.fillText((.001*this.gameTime).toFixed(0).padStart(3,"0"),a/2-36,80),Z.restore()};displayMessage=(t,i,e,s)=>{Z.font="100px Metal Mania",Z.fillStyle="white",Z.shadowOffsetX=4,Z.shadowOffsetY=4,Z.shadowColor="black",Z.fillText(t,i,e),Z.restore(),setTimeout(()=>{this.clearMessage(),this.texts.waveIncomingText=!1},s)};clearMessage=()=>{Z.clearRect(0,0,a,r),this.draw()};update=t=>{this.gameOver||(this.gameTime+=t),this.draw(),this.player.update(Z,Date.now()),this.explosions.forEach(i=>i.update(Z,t)),this.explosions=this.explosions.filter(t=>t.active),this.enemies.forEach(t=>{let i=Date.now();t.update(Z,i),l(this.player,t)&&(this.player.health-=5),t?.bullets?.forEach(t=>{l(t,this.player)&&(this.player.health-=t.damage,t.active=!1)}),this.player.bullets.forEach(i=>{l(i,t)&&(t.health-=i.damage,i.active=!1,t.health<=0&&(t.active=!1,this.addExplosion(t),this.gameOver||(this.score+=t.score)))})}),this.enemies=this.enemies.filter(t=>t.active),this.gameOver||this.enemySpawnIntervalId||(this.enemySpawnIntervalId=setInterval(()=>{let t=.4>Math.random();for(let i=0;i<10;i++)t?this.addZombie(i):this.addAngler1()},1e3*(this.scrollOffset>18500?5:10))),this.platformCollisionDetection()};setupEventListener=()=>{let t={};addEventListener("keydown",({code:i})=>{switch(t[i]=!0,i){case"ArrowLeft":J.left.pressed=!0,this.player.state=H.run,this.player.direction=-1;break;case"ArrowRight":J.right.pressed=!0,this.player.state=H.run,this.player.direction=1;break;case"KeyZ":break;case"KeyX":this.player.isJumping||(this.player.velocity.y-=30,this.player.isJumping=!0);break;case"KeyP":this.togglePause()}}),addEventListener("keyup",({code:i})=>{switch(t[i]=!1,i){case"ArrowLeft":J.left.pressed=!1,this.player.state=H.idle;break;case"ArrowRight":J.right.pressed=!1,this.player.state=H.idle;break;case"KeyX":this.player.isJumping||(this.player.velocity.y-=30,this.player.isJumping=!0);break;case"KeyZ":this.audio.playShootSound(),t.ArrowUp?this.player.verticalDirection=!0:this.player.verticalDirection=!1,this.player.shootTop(Date.now())}})};platformCollisionDetection=()=>{this.platforms.forEach(t=>{this.player.position.y+this.player.height<=t.position.y&&this.player.position.y+this.player.height+this.player.velocity.y>=t.position.y&&this.player.position.x+this.player.width>=t.position.x&&this.player.position.x<=t.position.x+t.width&&(this.player.velocity.y=0,this.player.isJumping=!1),this.player.position.y+this.player.height>t.position.y&&this.player.position.y<t.position.y+t.height&&this.player.position.x<t.position.x+t.width&&this.player.position.x+this.player.width>t.position.x&&(this.player.velocity.x=0,this.player.position.x=t.position.x-this.player.width),this.player.position.y+this.player.height>t.position.y&&this.player.position.y<t.position.y+t.height&&this.player.position.x<t.position.x+t.width&&this.player.position.x+this.player.width>t.position.x&&(this.player.velocity.x=0,this.player.position.x=t.position.x+t.width),this.enemies.forEach(i=>{l(i,t)&&i instanceof U&&(i.position.y=t.position.y-i.height)})})};handleWin=()=>{this.player.score>=5e3&&this.onGameOver()};resetLife=()=>{this.lives--,this.player.health=400,this.player.position.x=100,this.player.position.y=100};handleLose=()=>{this.lives<=0&&(this.gameOver=!0,clearInterval(this.enemySpawnIntervalId),this.onGameOver()),(this.player.position.y>r||this.player.health<=0)&&this.resetLife()};animate=(t,i)=>{if(i&&(this.onGameOver=i),this.isPaused){requestAnimationFrame(this.animate);return}let e=t-K;K=t,requestAnimationFrame(this.animate),Z.clearRect(0,0,a,r),this.update(e),this.enemies.forEach(t=>t.update(Z)),this.enemies=this.enemies.filter(t=>t.active),this.handlePlatformMovement(),this.handleWin(),this.handleLose(),this.enemies.forEach(t=>{t.position.y+t.height>r&&(t.active=!1)})};addAngler1=()=>{this.audio.playHeliSound(),this.enemies.push(new k({x:a,y:this.player.position.y}))};addExplosion=t=>{.6>Math.random()?this.explosions.push(new C({x:t.position.x,y:t.position.y-t.height/2})):this.explosions.push(new G({x:t.position.x,y:t.position.y-t.height/2}))}};const z=document.querySelector("#menu"),Y=document.querySelector("#over"),j=document.querySelector("canvas"),N=document.querySelector("#play-btn");function $(){z.style.display="none",j.style.display="none",Y.style.display="flex"}function Q(){z.style.display="none",Y.style.display="none",j.style.display="block",new B().animate(0,$)}j.style.display="none",Y.style.display="none",addEventListener("keydown",({code:t})=>{"Space"===t&&Q()}),N.addEventListener("click",Q);
//# sourceMappingURL=index.53ea7bc5.js.map
